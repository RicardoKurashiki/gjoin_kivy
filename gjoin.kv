#:import C kivy.utils.get_color_from_hex

<LinhaSearch>
    spacing: 5
    SmoothButton:
        text: root.nome_group
        back_color: (0.255, 0.412, 1.0, 1.0)
        font_size: 20
        on_release: root.clique()

<LinhaHomePage>
    spacing: 5
    SmoothButton:
        text:root.nome_group
        back_color: (0.255, 0.412, 1.0, 1.0)
        font_size: 20
        on_release: root.go_chat()

<LinhaChat>
    spacing: 5
    Label:
        text: root.mensagem
        font_size: 20

<WarningPopup>:
    id: pop
    size_hint: .7, .3
    auto_dismiss: False
    title: 'Atencao'
    BoxLayout:
        orientation: 'vertical'
        padding: 5
        spacing: 5
        Label: 
            id: aviso
            text: ''
        Button:
            text: 'Continuar'
            on_release: pop.dismiss()
<LoginPage>:
    Widget:
        canvas:
            Color:
                rgba: [192, 192, 192, 0.97]
            Rectangle:
                size: self.size
                pos: self.pos
    BoxLayout:
        orientation: 'vertical'
        Widget:
            canvas:
                Color:
                    rgba: [1,1,1,0.9]
                Rectangle:
                    pos: (137.5, 415)
                    size: (125, 125)
                    source: root.imagem_app
        BoxLayout:
            orientation: 'vertical'
            Widget:
                MyTextInput:
                    id: log_email
                    padding: [10, 0.5*(self.height - self.line_height)]
                    font_size: 16
                    hint_text: 'E-mail'
                    size: 300, 50
                    pos: 50, 300
                    size_hint: 0.5, None
            Widget:
                MyTextInput:
                    id: log_pass
                    password: True
                    padding: [10, 0.5*(self.height - self.line_height)]
                    hint_text: 'Senha'
                    font_size: 16
                    size: 300, 50
                    pos: 50, 225
                    size_hint: 0.5, None
            Widget:        
                SmoothButton:
                    id: login
                    text: 'Login'
                    size_hint: (None, None)
                    size: 167.5, 40
                    pos: 25, 25
                    back_color: (0.157, 0.455, 0.753, 1.0)
                    on_release: root.login()
            Widget:
                SmoothButton:
                    text: 'Cadastrar'
                    size_hint: (None, None)
                    size: 167.5, 40
                    pos: 207.5, 25
                    back_color: (0.157, 0.455, 0.753, 1.0)
                    on_release: root.go_register()
<RegisterPage>:
    Widget:
        canvas:
            Color:
                rgba: [192, 192, 192, 0.97]
            Rectangle:
                size: self.size
                pos: self.pos
    BoxLayout:
        orientation: 'vertical'
        Widget:
            MyTextInput:
                id: reg_name
                text: ''
                hint_text: 'Nome completo'
                padding: [10, 0.5*(self.height - self.line_height)]
                font_size: 16
                size: 300, 50
                pos: 50, 525
        Widget:
            MyTextInput:
                id: reg_email
                text: ''
                hint_text: 'E-mail'
                padding: [10, 0.5*(self.height - self.line_height)]
                font_size: 16
                size: 300, 50
                pos: 50, 450
        Widget:
            MyTextInput:
                id: reg_univ
                text: ''
                hint_text: 'Universidade'
                padding: [10, 0.5*(self.height - self.line_height)]
                font_size: 16
                size: 300, 50
                pos: 50, 375
        Widget:
            MyTextInput:
                id: reg_curso
                text: ''
                hint_text: 'Curso'
                padding: [10, 0.5*(self.height - self.line_height)]
                font_size: 16
                size: 300, 50
                pos: 50, 300
        Widget:
            MyTextInput:
                id: reg_pass
                text: ''
                hint_text: 'Senha'
                password: True
                padding: [10, 0.5*(self.height - self.line_height)]
                font_size: 16
                size: 300, 50
                pos: 50, 225
        Widget:
            MyTextInput:
                id: reg_confirmPass
                text: ''
                hint_text: 'Confirmar Senha'
                password: True
                padding: [10, 0.5*(self.height - self.line_height)]
                font_size: 16
                size: 300, 50
                pos: 50, 150
        Widget:
            SmoothButton:
                id: register
                text: 'Registrar'
                size_hint: (None, None)
                size: 167.5, 40
                pos: 25, 25
                back_color: (0.157, 0.455, 0.753, 1.0)
                on_release: root.register_account()
        Widget:
            StrokeButton:
                id: reg_cancel
                text: 'Cancelar'
                size_hint: (None, None)
                size: 167.5, 40
                pos: 207.5, 25
                back_color: (0.157, 0.455, 0.753, 1.0)
                on_release: root.cancel_register()

<HomePage>: 
    Widget:
        canvas:
            Color:
                rgba: [192, 192, 192, 1]
            Rectangle:
                size: self.size
                pos: self.pos
    BoxLayout:
        orientation: 'vertical'
        spacing: 5
        padding: 5
        BoxLayout:
            height: 162.5
            size_hint_y: None
            Widget:
                canvas:
                    Color:
                        rgba: [1,1,1,0.9]
                    Rectangle:
                        pos:(10,555)
                        size:(35,35)
                        source: root.imagem_app
            Widget:
                SmoothOption:
                    pos: (50,555)
                    id: criar_gp
                    text: "Novo Grupo"
                    back_color: (0.157, 0.455, 0.753, 1.0)
                    on_release: root.go_to_create()
                    size: (130, 35)
                SmoothOption:
                    pos: (185, 555)
                    text: "Buscar"
                    id: search
                    back_color: (0.157, 0.455, 0.753, 1.0)
                    on_release: root.go_to_search()
                    size: (100, 35)
                RoundedButton:
                    pos:(290,555)
                    id: logout
                    text: "Logout"
                    back_color: (0.157, 0.455, 0.753, 1.0)
                    size: (100, 35)
                    on_release: root.go_back()
            Widget:
                Label:
                    text: 'Meus Grupos'
                    font_size: 30
                    size: (400, 100)
                    pos: 0, 450
                    color: (0, 0, 0, 1)
        RecycleView:
            id: listagemhome
            viewclass: 'LinhaHomePage'
            RecycleBoxLayout:
                padding: 2.5
                spacing: 5
                default_size: None, dp(35)
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                orientation: 'vertical'
                Widget:
                    background_color: (0,0,0,0)
                    background_normal: ''
                    back_color: (1,0,1,1)
                    border_radius: [7]
                    bold: True
                    canvas.before:
                        Color:
                            rgba: self.back_color
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos 
                            radius: self.border_radius
                    back_color: (0.157, 0.455, 0.753, 1.0)

<CreatePage>:
    Widget:
        canvas:
            Color:
                rgba: [192, 192, 192, 0.97]
            Rectangle:
                size: self.size
                pos: self.pos
    Widget:
        Label:
            text: 'Criacao de Grupo'
            pos: 125, 460
            size: (150, 50)
            color: (0, 0, 0, 1)
            font_size: 30
    Widget:
        RoundedButton:
            text: 'Voltar'
            back_color: (0.157, 0.455, 0.753, 1.0)
            pos: (10, 555)
            size: (100, 35)
            on_release: root.voltar()
    Widget:
        MyTextInput:
            id: nome_novo_grupo
            text: ''
            hint_text: 'Nome do Grupo'
            padding: [10, 0.5*(self.height - self.line_height)]
            font_size: 16
            size: 300, 50
            pos: 50, 375
    Widget:
        MyTextInput:
            id: faculdade_novo_grupo
            text: ''
            hint_text: 'Faculdade'
            padding: [10, 0.5*(self.height - self.line_height)]
            font_size: 16
            size: 300, 50
            pos: 50, 300
    Widget:
        MyTextInput:
            id: materia_novo_grupo
            text: ''
            hint_text: 'Disciplina'
            padding: [10, 0.5*(self.height - self.line_height)]
            font_size: 16
            size: 300, 50
            pos: 50, 225
    Widget:
        MyTextInput:
            id: horario_novo_grupo
            text: ''
            hint_text: 'Horario'
            padding: [10, 0.5*(self.height - self.line_height)]
            font_size: 16
            size: 300, 50
            pos: 50, 150
    Widget:
        SmoothButton:
            text: 'Criar Grupo'
            back_color: (0.157, 0.455, 0.753, 1.0)
            size: 380, 55
            pos: 10, 20
            on_release: root.criar_grupo()

<ChatPage>:
    on_enter: root.load_message()
    orientation: 'vertical'
    Widget:
        canvas:
            Color:
                rgba: [192, 192, 192, 0.97]
            Rectangle:
                size: self.size
                pos: self.pos
    BoxLayout:
        orientation: 'vertical'
        spacing: 5
        padding: 1
        BoxLayout:
            height: 30
            size_hint_y: None
            Widget:
                RoundedButton:
                    text: 'Voltar'
                    back_color: (0.157, 0.455, 0.753, 1.0)
                    pos: (10, 555)
                    size: (70, 35)
                    on_release: root.exit_chat()
            Widget:
                Label:
                    text: 'Sala de Chat'
                    color: (0,0,0,1)
                    pos: (0, 560)
                    size: (400, 25)
                    font_size: 24
        BoxLayout:
            orientation: 'vertical'
            border_radius: 12
            Widget:
                canvas:
                    Color:
                        rgba: (0.157, 0.455, 0.753, 1)
                    RoundedRectangle:
                        size: (380, 490)
                        pos: 10, 55
                        radius: self.border_radius
            BoxLayout:
                size_hint_x:None
                size_hint_y:None
                height: 425
                width: 377
                RecycleView:
                    id: listagemchat
                    viewclass: 'LinhaChat'
                    RecycleBoxLayout:
                        padding: 2.5
                        spacing: 5
                        default_size: None, dp(35)
                        default_size_hint: 1, None
                        size_hint_y: None
                        height: self.minimum_height
                        orientation: 'vertical'
            BoxLayout:
                Widget:
                    MyTextInput:
                        id: new_message
                        text: ''
                        padding: [10, 0.5*(self.height - self.line_height)]
                        font_size: 16
                        pos: 27, 10
                        size: 290, 35
                Widget:
                    SmoothOption:
                        text: '>'
                        font_size: 16
                        back_color: (0.157, 0.455, 0.753, 1.0)
                        size: 50, 35
                        pos: 340, 10
                        on_release: root.send_message()

<SearchPage>:
    on_enter: root.TodosGrupos()
    Widget:
        canvas:
            Color:
                rgba: [192, 192, 192, 0.97]
            Rectangle:
                size: self.size
                pos: self.pos
    BoxLayout:
        orientation: 'vertical'
        spacing: 5
        padding: 5
        BoxLayout:
            height: 162.5
            size_hint_y: None
            Widget:
                RoundedButton:
                    text: 'Voltar'
                    back_color: (0.157, 0.455, 0.753, 1.0)
                    pos: (10, 555)
                    size: (60, 35)
                    on_release: root.returnhome()
            Widget:
                MyTextInput:
                    id: txBusca
                    hint_text: 'Nome do grupo'
                    font_size: 16
                    text: ''
                    pos: (95, 555)
                    size: (206, 35)
            Widget:
                SmoothOption:
                    text: 'Buscar'
                    back_color: (0.157, 0.455, 0.753, 1.0)
                    size: (65, 36)
                    pos: (325, 555)
                    on_release: root.pesquisa(txBusca)
            Widget:
                Label:
                    text: 'Grupos'
                    font_size: 30
                    size: (400, 100)
                    pos: 0, 450
                    color: (0, 0, 0, 1)
        RecycleView:
            id: listagem
            viewclass: 'LinhaSearch'
            RecycleBoxLayout:
                padding: 2.5
                spacing: 5
                default_size: None, dp(35)
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                orientation: 'vertical'
<JoinPage>
    on_enter: root.load_message()
    orientation: 'vertical'

    Widget:
        canvas:
            Color:
                rgba: [192, 192, 192, 0.97]
            Rectangle:
                size: self.size
                pos: self.pos
    BoxLayout:
        orientation: 'vertical'
        spacing: 5
        padding: 1
        BoxLayout:
            height: 30
            size_hint_y: None
            Widget:
                Label:
                    id: nome_da_sala
                    text: ''
                    color: (0,0,0,1)
                    pos: (0, 565)
                    size: (400, 25)
                    font_size: 24
        BoxLayout:
            orientation: 'vertical'
            border_radius: 12
            Widget:
                canvas:
                    Color:
                        rgba: (0.157, 0.455, 0.753, 1)
                    RoundedRectangle:
                        size: (380, 490)
                        pos: 10, 55
                        radius: self.border_radius
            BoxLayout:
                size_hint_x:None
                size_hint_y:None
                height: 425
                width: 377
                RecycleView:
                    id: listagemchat
                    viewclass: 'LinhaChat'
                    RecycleBoxLayout:
                        padding: 2.5
                        spacing: 5
                        default_size: None, dp(35)
                        default_size_hint: 1, None
                        size_hint_y: None
                        height: self.minimum_height
                        orientation: 'vertical'
            BoxLayout:
                Widget:
                    Label:
                        text: 'Deseja entrar no grupo?'
                        font_size: 20
                        color: (0,0,0,1)
                        pos: 25, 10
                        size: 200, 35
                Widget:
                    SmallOption:
                        text: 'Sim'
                        size: 60, 25
                        back_color: (0.157, 0.455, 0.753, 1.0)
                        pos: 255, 15
                        on_release: root.entrar_sim()
                Widget:
                    SmallOption:
                        text: 'Nao'
                        back_color: (0.157, 0.455, 0.753, 1.0)
                        size: 60, 25
                        pos: 325, 15
                        on_release: root.entrar_nao()

<SmoothButton@Button>:
    background_color: (0,0,0,0)
    background_normal: ''
    back_color: (1,0,1,1)
    border_radius: [7]
    bold: True
    canvas.before:
        Color:
            rgba: self.back_color
        RoundedRectangle:
            size: self.size
            pos: self.pos 
            radius: self.border_radius

<StrokeButton@Button>:
    background_color: (0,0,0,0)
    background_normal: ''
    back_color: (1,0,1,1)
    color: self.back_color
    bold: True 
    border_radius: 7
    canvas.before:
        Color:
            rgba: self.back_color
        Line:
            rounded_rectangle: (self.pos[0], self.pos[1], self.size[0], self.size[1], self.border_radius)
            width: 1.2

<SmoothOption@Button>:
    background_color: (0,0,0,0)
    background_normal: ''
    back_color: (1,0,1,1)
    border_radius: [18]
    bold: True
    canvas.before:
        Color:
            rgba: self.back_color
        RoundedRectangle:
            size: self.size
            pos: self.pos 
            radius: self.border_radius

<RoundedButton@Button>:
    background_color: (0,0,0,0)
    background_normal: ''
    back_color: (1,0,1,1)
    color: self.back_color
    bold: True 
    border_radius: 18
    canvas.before:
        Color:
            rgba: self.back_color
        Line:
            rounded_rectangle: (self.pos[0], self.pos[1], self.size[0], self.size[1], self.border_radius)
            width: 1.2

<MyTextInput@TextInput>:
    multiline: False
    background_color: 1,1,1,0
    padding: [10, 0.4*(self.height - self.line_height)]
    cursor_color: C('#000000')
    canvas.after:
        Color:
            rgba: [1,1,1,0]
        Ellipse:
            angle_start:180
            angle_end:360
            pos:(self.pos[0] - self.size[1]/2.0, self.pos[1])
            size: (self.size[1], self.size[1])
        Ellipse:
            angle_start:360
            angle_end:540
            pos: (self.size[0] + self.pos[0] - self.size[1]/2.0, self.pos[1])
            size: (self.size[1], self.size[1])
        Color:
            rgba: C('#6e6e6e')
        Line:
            points: self.pos[0] , self.pos[1], self.pos[0] + self.size[0], self.pos[1]
        Line:
            points: self.pos[0], self.pos[1] + self.size[1], self.pos[0] + self.size[0], self.pos[1] + self.size[1]
        Line:
            ellipse: self.pos[0] - self.size[1]/2.0, self.pos[1], self.size[1], self.size[1], 180, 360
        Line:
            ellipse: self.size[0] + self.pos[0] - self.size[1]/2.0, self.pos[1], self.size[1], self.size[1], 360, 540
        
<SmallOption@Button>:
    background_color: (0,0,0,0)
    background_normal: ''
    back_color: (1,0,1,1)
    border_radius: [10]
    bold: True
    canvas.before:
        Color:
            rgba: self.back_color
        RoundedRectangle:
            size: self.size
            pos: self.pos 
            radius: self.border_radius